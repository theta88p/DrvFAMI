DrvFAMI説明書

Music番号 {} の中に Trackを定義していきます。
いちばん数値の小さいMusicから再生されます。
Trackの引数はトラック番号,音源番号です。
音源番号は0と1が矩形波、2が三角波3がノイズ4がDPCM。
トラック番号は0〜15まで好きにつけられます。
同じ音源番号のトラックは数値の少ない方が優先して再生されます。
というかofgsと同じです。

エンベロープは@e番号{}で定義します。
nsdlみたいな書き方ですけど、ofgsみたいに数値と待ちフレーム数が
セットになっているデータにコンパイラで変換してるので
同じ数値を並べて書くと無駄になります。f数値で待ちフレーム指定してください。
エンベロープは違う種類間で使い回しできます。
1個目の|がループで戻る先の場所で、2個目の|がリリース後のエンベロープになります。
どちらも省略可能です。|が1個になるとリリースが無効になり
0個になると戻り先が先頭になります。
エンベロープ指定は@v0,10のようにすると後ろの数値がディレイ指定になります（省略可）。

音程エンベロープとデチューンの値はレジスタ値に直接加算されます
ノートエンベロープやソフトウェアスイープの開始終了値は半音単位でノートナンバーに加算されます
（スイープの増加値はレジスタ加算）

@mでノートマップ指定できます。コマンドを音階に割り当てるやつです。
割り当てるノートナンバーと変換先のノートナンバーあとコマンドを書けば
コンパイラで変換します。nsdlのパッチとだいたい同じです。

@dpcmでDPCM定義できます。番号とファイルパスを書いてください。
音階には割り当てられません。@コマンドで指定して音階で再生周波数を選ぶ方式です。
使い辛かったら@mでノートに割り当ててください。

※ノートマップでDPCMを使用しているときにキーシフトを使用しても
音程が変わるだけで音色が変わらないので正常に再生されません。


以下コマンド一覧です。
コマンドはLとKとQ以外は大文字小文字の区別はありません。

#title		タイトル
#artist		アーティスト
#copyright	著作者
#timebase	1小節当たりのフレーム数
#offsetpcm	DPCMデータをオフセットして場所をあけるコマンド
#offsetv	音量エンベロープの値を呼び出すときにオフセットします
#offsetf	音程					〃
#offsetn	ノート					〃
#offsett	音色					〃
#extdevice	拡張音源の指定。今のところMMC5とVRC6が指定できます。

cdefgab	音符。%をつけるとフレーム音長。~で装飾符。
r		休符
r-		エンベロープ無効
<>		相対オクターブ
o		絶対オクターブ
[		ループ開始
]		ループ終了
:		ループ途中終了
q		ゲートタイム（音長-n。他と排他）
u		ゲートタイム（音長n。他と排他）
Q		ゲートタイム（音長n/8。他と排他）
k		キーシフト相対指定
K		キーシフト絶対指定
^		タイ
&		スラー
@		音色指定
t		テンポ
@p		指定した曲番号のデータを再生
@v		音量エンベロープ指定（番号の後に続けてカンマをつけるとディレイ指定）
@v*		音量エンベロープ停止
@f		音程エンベロープ指定（番号の後に続けてカンマをつけるとディレイ指定）
@f*		音程エンベロープ停止
@n		ノートエンベロープ指定（番号の後に続けてカンマをつけるとディレイ指定）
@n*		ノートエンベロープ停止
@t		音色エンベロープ指定（番号の後に続けてカンマをつけるとディレイ指定）
@t*		音色エンベロープ停止
L		無限ループ
l		デフォルト音長
v		トラックボリューム絶対指定（0〜15）
v+-		トラックボリューム相対指定（-15〜+15）
@d		デチューン
hs		ハードウェアスイープ（引数は 変化レート, 変化方向, 変化量）
he		ハードウェアエンベロープ（引数は 変化レート, ループするしない）
s		ソフトウェアスイープ（引数は 開始音程, 終了音程, ディレイ, 変化度合）
s*		ソフトウェアスイープ無効
\		サブルーチン
$		マクロ
pd		疑似ディレイ（引数は ディレイ, ボリューム, 何分音符短くするか）
@m		マップ定義
